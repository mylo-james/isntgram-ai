# Story 1.1: Monorepo & Project Scaffolding

**Status**: Approved

## Story

**As a developer**, I want a monorepo with separate Next.js (frontend) and NestJS (backend) applications initialized, so that I have a clean, organized structure for full-stack development.

## Acceptance Criteria

1. A monorepo (e.g., using npm workspaces) is created and initialized with Git.
2. A new Next.js application is bootstrapped in an `apps/web` directory.
3. A new NestJS application is bootstrapped in an `apps/api` directory.
4. Root-level package.json scripts exist to run, build, and test each application.
5. A base .gitignore file is configured for Node.js, Next.js, and NestJS projects.

## Tasks / Subtasks

- [ ] Task 1: Initialize Git repository and create monorepo structure (AC: 1)

  - [ ] Initialize Git repository with initial commit
  - [ ] Create root package.json with npm workspaces configuration
  - [ ] Create apps/ directory structure
  - [ ] Create packages/ directory structure for shared code

- [ ] Task 2: Bootstrap Next.js frontend application (AC: 2)

  - [ ] Create apps/web directory
  - [ ] Initialize Next.js 14.x application with TypeScript
  - [ ] Configure Tailwind CSS for styling
  - [ ] Set up ESLint and Prettier configuration
  - [ ] Create basic app structure with App Router

- [ ] Task 3: Bootstrap NestJS backend application (AC: 3)

  - [ ] Create apps/api directory
  - [ ] Initialize NestJS 10.x application with TypeScript
  - [ ] Configure TypeORM for database connectivity
  - [ ] Set up ESLint and Prettier configuration
  - [ ] Create basic module structure

- [ ] Task 4: Create shared types package (AC: 1, 2, 3)

  - [ ] Create packages/shared-types directory
  - [ ] Initialize package.json for shared types
  - [ ] Set up TypeScript configuration for shared types
  - [ ] Create initial shared type definitions

- [ ] Task 5: Configure root-level scripts and tooling (AC: 4)

  - [ ] Add dev, build, test scripts to root package.json
  - [ ] Configure Husky for Git hooks
  - [ ] Set up lint-staged for pre-commit checks
  - [ ] Configure markdownlint for documentation

- [ ] Task 6: Set up .gitignore and development configuration (AC: 5)
  - [ ] Create comprehensive .gitignore for Node.js, Next.js, NestJS
  - [ ] Configure environment variable templates
  - [ ] Set up development environment documentation

## Dev Notes

### Previous Story Insights

This is the first story, so no previous story context exists.

### Technology Stack Requirements

[Source: docs/architecture/03-development-environment.md]

**Frontend Stack:**

- Next.js 14.x with TypeScript 5.x
- Tailwind CSS 3.x for styling
- Shadcn/ui component library
- Redux Toolkit 2.x for state management
- Jest + React Testing Library for testing

**Backend Stack:**

- NestJS 10.x with TypeScript 5.x
- PostgreSQL 16.x database
- TypeORM for database connectivity
- Jest for testing
- Auth.js (NextAuth) 5.x for authentication

**Development Tools:**

- ESLint 9.x for code quality
- Prettier 3.x for code formatting
- Husky 9.x for Git hooks
- lint-staged 15.x for pre-commit checks
- markdownlint-cli for documentation standards

### Project Structure Requirements

[Source: docs/architecture/08-project-structure.md]

**Monorepo Structure:**

```
/
├── .cursor/           # AI agent rules
├── apps/
│   ├── web/          # Next.js frontend
│   │   └── tests/    # Frontend tests
│   └── api/          # NestJS backend
├── packages/
│   └── shared-types/ # Shared TypeScript types
└── docs/             # Project documentation
```

**Frontend Architecture:**

- Feature-sliced component organization
- Next.js App Router for file-system-based routing
- Centralized API client services layer
- Redux Toolkit for global state management

**Backend Architecture:**

- Feature-based modular structure (controllers, services, DTOs, entities)
- Repository Pattern using TypeORM
- JWT-based authentication strategy

### Coding Standards

[Source: docs/architecture/10-coding-standards.md]

**TypeScript Standards:**

- All TypeScript strict flags enabled
- Use shared types from `packages/shared-types`
- No `any` types - explicit typing required
- Prefer interfaces over types for object shapes
- Use generic constraints for type safety

**Code Organization:**

- Feature-sliced architecture
- Co-location of tests, types, and utilities
- Barrel exports for clean imports
- Consistent naming conventions

### Testing Requirements

[Source: docs/architecture/09-testing-strategy.md]

**Testing Pyramid:**

- Unit Tests (80%+ coverage): Jest + React Testing Library (frontend), Jest (backend)
- Integration Tests (15%+ coverage): API endpoint testing, component integration
- E2E Tests (5%+ coverage): Playwright for critical user journeys

**TDD Workflow:**

1. Write failing test first
2. Implement minimal code to pass test
3. Refactor while maintaining test coverage
4. Repeat for each feature

**Test Organization:**

- Tests co-located with source code
- Shared test utilities in dedicated packages
- Mock data factories for consistent test data

### File Locations

Based on the project structure requirements:

- Root package.json: `/package.json`
- Frontend app: `/apps/web/`
- Backend app: `/apps/api/`
- Shared types: `/packages/shared-types/`
- Documentation: `/docs/` (already exists)
- Git configuration: `/.gitignore`

### Technical Constraints

- Must use npm workspaces for monorepo management
- TypeScript strict mode required for all applications
- All applications must have ESLint and Prettier configured
- Git hooks must be configured with Husky and lint-staged
- Documentation must follow markdownlint standards

## Testing

### Testing Standards

[Source: docs/architecture/09-testing-strategy.md]

**Frontend Testing Setup:**

- Jest + React Testing Library configuration in `/apps/web/`
- Unit test coverage target: 80%+
- Test files co-located with source code
- Custom Jest matchers for domain-specific assertions

**Backend Testing Setup:**

- Jest configuration in `/apps/api/`
- Unit test coverage target: 80%+
- Supertest for API endpoint testing
- Mock data factories for consistent test data

**E2E Testing Setup:**

- Playwright configuration at root level
- Focus on critical user journeys
- Coverage target: 5%+

### Specific Testing Requirements for This Story

- Sample passing unit test in both frontend and backend to prove configuration
- Basic Jest configuration validation
- ESLint and Prettier configuration validation
- Git hooks functionality validation

## Change Log

| Date | Version | Description            | Author   |
| ---- | ------- | ---------------------- | -------- |
| TBD  | 1.0     | Initial story creation | Bob (SM) |

## Dev Agent Record

### Agent Model Used

TBD

### Debug Log References

TBD

### Completion Notes List

TBD

### File List

TBD

## QA Results

TBD
